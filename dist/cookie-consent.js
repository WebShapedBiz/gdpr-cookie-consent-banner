var e="(prefers-reduced-motion)";function t(){return window.matchMedia(e).matches}var n={expires:r(),path:"/"};function o(e){var t=("; "+document.cookie).split("; "+e+"=").pop().split(";").shift();if(t&&"undefined"!==t)return["true","false"].includes(t)?"true"===t:JSON.parse(t)}function i(){return document.cookie.split("; ").map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}})}function c(e,t,o){var i={};i[e]=JSON.stringify(t),i=a(i=Object.assign({},i,n,o)),document.cookie=i}function s(e,t){var o={};o[e]="",o["max-age"]=0,o.path=n.path,(o=Object.assign({},o,t)).expires=new Date("1996-06-13"),c(e,o=a(o))}function r(e){void 0===e&&(e=365);var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t}function a(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("; ")}var u={getCookie:o,getAllCookies:i,setCookie:c,removeCookie:s,findCookie:function(e){var t=i(),n=new RegExp("^"+e,"g");return t.find(function(e){return n.test(e.key)})||null},clearCookies:function(e,t){var n=i(),o=new RegExp("^"+e,"g");n.forEach(function(e){var n=e.key;n.match(o)&&s(n,t)})},getExpirationDate:r},p=function(e){var t={name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),labels:[{name:"functional",checked:!0,onReject:function(e){e.removeCookieOptions()},onAccept:function(e){var t=e.getChoices();e.saveCookieOptions({choices:t,consented:!0})},onUpdate:function(e,t){console.log("Functional now:",t.choice)}}]};if(this.options=Object.assign({},t,e),this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var n=this.loadCookieOptions();n&&n.choices?(this.setChoices(n.choices),this.runEventCircle(n.choices)):this.initFields(),this.showElement(n&&n.consented?this.options.notice:this.options.banner)}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")};p.prototype.initFields=function(){var e=this.options.labels.map(function(e){return{name:e.name,value:e.checked}});return this.setChoices(e),e},p.prototype.initEvents=function(){var e=this;this.button.reject.addEventListener("click",function(){var t=e.initFields();e.saveCookieOptions({choices:t,consented:!1}),e.runEventsFor(t,"onReject"),window.location.reload()}),this.button.accept.addEventListener("click",function(){var t=e.getChoices();e.runEventCircle(t),e.hideElement(e.options.banner),setTimeout(function(){e.showElement(e.options.notice)},160)}),this.options.notice.addEventListener("click",function(){e.saveCookieOptions({consented:!1}),e.hideElement(e.options.notice),e.showElement(e.options.banner)})},p.prototype.loadCookieOptions=function(){return o(this.options.name)||{}},p.prototype.saveCookieOptions=function(e){var t=o(this.options.name),n=Object.assign({},t,e);c(this.options.name,n)},p.prototype.removeCookieOptions=function(){o(this.options.name)&&s(this.options.name)},p.prototype.getChoice=function(e){return this.options.banner.querySelector('.choice [name="choice:'+e+'"]').checked},p.prototype.getChoices=function(){var e=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(t){var n=t.getAttribute("name").replace("choice:","");e.push({name:n,value:t.checked})}),e},p.prototype.setChoices=function(e){this.options.banner.querySelectorAll(".choice input").forEach(function(t){var n=t.getAttribute("name").replace("choice:",""),o=e.find(function(e){return e.name===n});o&&(t.checked=o.value)})},p.prototype.showElement=function(e){"animate"in e&&!t()?e.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function t(){e.classList.add("visible"),e.removeEventListener("finish",t)}):e.classList.add("visible")},p.prototype.hideElement=function(e){"animate"in e&&!t()?e.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function t(){e.classList.remove("visible"),e.removeEventListener("finish",t)}):e.classList.remove("visible")},p.prototype.runEventFor=function(e,t){if(e&&(e[t]&&e[t](this),e.onUpdate)){var n={choice:this.getChoice(e.name)};e.onUpdate(this,n)}},p.prototype.runEventsFor=function(e,t){var n=this;e.forEach(function(e){var o=e.name,i=n.options.labels.find(function(e){return e.name===o});n.runEventFor(i,t)})},p.prototype.runEventCircle=function(e){var t=this;e.forEach(function(e){var n=e.name,o=e.value,i=t.options.labels.find(function(e){return e.name===n});t.runEventFor(i,o?"onAccept":"onReject")})},p.cookieService=u,module.exports=p;
//# sourceMappingURL=cookie-consent.js.map
