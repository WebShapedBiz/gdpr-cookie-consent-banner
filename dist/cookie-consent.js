function e(){return(e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function n(){return window.matchMedia("(prefers-reduced-motion)").matches}var t=function(){function e(){}return e.set=function(e,n,t,i,o,c,s){void 0===o&&(o=7),void 0===s&&(s="Lax");var r=encodeURIComponent(e)+"="+JSON.stringify(n)+";";t&&(r+="domain="+t+";"),i&&(r+="path="+i+";"),"number"==typeof o&&(r+="max-age="+60*o*60*24+";"),c&&(r+="secure;"),r+="sameSite="+s+";",document.cookie=r},e.get=function(e){if(""!==document.cookie)for(var n=document.cookie.split(";"),t=0;t<n.length;t++){var i=n[t].split("="),o=i[0],c=i[1];if((o=decodeURIComponent(o).replace(/^ /,""))===e)return JSON.parse(c)}return null},e.getAll=function(){var e={};return""!==document.cookie&&document.cookie.split(";").forEach(function(n){var t=n.split("="),i=t[0],o=t[1];i=decodeURIComponent(i).replace(/^ /,""),o=decodeURIComponent(o),e[i]=o}),e},e.find=function(e){var n=this.getAll();for(var t in"string"==typeof e&&(e=new RegExp("^"+e,"g")),n)if(e.test(t))return n[t];return null},e.delete=function(e,n,t){this.set(e,"",n,t,0)},e.deleteAll=function(e,n){var t=this.getAll();for(var i in t)this.delete(i,e,n)},e.clear=function(e,n,t){var i=this.getAll();for(var o in"string"==typeof e&&(e=new RegExp("^"+e,"g")),i){var c=o.match(e);c&&c.length>0&&this.delete(o,n,t)}},e}(),i={ON_UPDATE:"onUpdate",ON_VALUE_CHANGED:"onValueChange",ON_ACCEPT:"onAccept",ON_REJECT:"onReject"},o=function(){function o(n){var t={name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),linkOnly:!1,onRejectEnd:function(){window.location.reload()},onAcceptEnd:function(e){var n=e.getChoices();e.saveUserOptions({choices:n})},capabilities:[{name:"functional",checked:!0,onReject:function(e){e.removeUserOptions()},onAccept:function(e){e.saveUserOptions({consented:!0})}}]};if(this.options=e({},t,{},n),this.queue=[],this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var i=this.loadUserOptions();i&&i.choices?(this.setChoices(i.choices),this.initStartUpEvents()):this.initFields(),i&&i.consented?this.showNotice():this.showBanner()}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")}var c=o.prototype;return c.initFields=function(){var e=this.options.capabilities.map(function(e){return{name:e.name,value:e.checked}});return this.setChoices(e),e},c.initEvents=function(){var e=this;this.button.reject.addEventListener("click",function(){e.options.debug&&console.time("reject");var n=e.initFields();n.forEach(function(n){var t=e.getCapability(n.name);e._runValueEventsFor(t,n),e._runEventFor(t,i.ON_REJECT)}),e._startRunner(),e.setChoices(n),e.saveUserOptions({choices:n}),e.options.onRejectEnd instanceof Function&&e.options.onRejectEnd(e),e.options.debug&&console.timeEnd("reject"),e.hideBanner(),setTimeout(function(){e.showNotice()},160)}),this.button.accept.addEventListener("click",function(){e.options.debug&&console.time("accept"),e.getChoices().forEach(function(n){var t=e.getCapability(n.name);e._runValueEventsFor(t,n),e._runEventFor(t,n.value?i.ON_ACCEPT:i.ON_REJECT)}),e._startRunner(),e.options.onAcceptEnd instanceof Function&&e.options.onAcceptEnd(e),e.options.debug&&console.timeEnd("accept"),e.hideBanner(),setTimeout(function(){e.showNotice()},160)}),this.options.notice.addEventListener("click",function(){e.hideNotice(),e.showBanner()})},c.initStartUpEvents=function(){var e=this;this.getChoices().forEach(function(n){var t=e.getCapability(n.name);e._runEventFor(t,n.value?i.ON_ACCEPT:i.ON_REJECT),e._startRunner()})},c.loadUserOptions=function(){return t.get(this.options.name)||{}},c.saveUserOptions=function(n){var i=e({},this.loadUserOptions(),{},n);t.set(this.options.name,i)},c.removeUserOptions=function(){t.get(this.options.name)&&t.delete(this.options.name)},c.getChoice=function(e){return this.options.banner.querySelector('.choice [name="choice:'+e+'"]').checked},c.getChoices=function(){var e=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(n){var t=n.getAttribute("name").replace("choice:","");e.push({name:t,value:n.checked})}),e},c.setChoices=function(e){this.options.banner.querySelectorAll(".choice input").forEach(function(n){var t=n.getAttribute("name").replace("choice:",""),i=e.find(function(e){return e.name===t});i&&(n.checked=i.value)})},c.getCapability=function(e){return this.options.capabilities.find(function(n){return n.name===e})},c.showElement=function(e){"animate"in e&&!n()?e.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function(){e.classList.add("visible")}):e.classList.add("visible")},c.hideElement=function(e){"animate"in e&&!n()?e.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function(){e.classList.remove("visible")}):e.classList.remove("visible")},c.hideBanner=function(){this.hideElement(this.options.banner)},c.showBanner=function(){this.showElement(this.options.banner)},c.hideNotice=function(){this.options.linkOnly||this.hideElement(this.options.notice)},c.showNotice=function(){this.options.linkOnly||this.showElement(this.options.notice)},c._addToQueue=function(e,n){this.queue.push({name:e,func:n})},c._startRunner=function(){var e=this;Object.values(i).forEach(function(n){e.queue.filter(function(e){return e.name===n}).forEach(function(e){return(0,e.func)()})}),this.queue=[]},c._runEventFor=function(e,n,t){var i=this;void 0===t&&(t={}),e&&n&&e[n]&&e[n]instanceof Function&&this._addToQueue(n,function(){return e[n](i,t)})},c._runValueEventsFor=function(e,n){var t={choice:n.value};this._runEventFor(e,i.ON_UPDATE,t);var o=this.loadUserOptions();if(null==o?void 0:o.choices){var c=o.choices.find(function(e){return e.name===n.name});n.value!==c.value&&this._runEventFor(e,i.ON_VALUE_CHANGED,t)}},o}();o.cookie=t,module.exports=o;
//# sourceMappingURL=cookie-consent.js.map
