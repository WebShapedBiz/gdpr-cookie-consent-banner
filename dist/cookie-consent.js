function n(){return(n=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n}).apply(this,arguments)}function t(){return window.matchMedia("(prefers-reduced-motion)").matches}var e=function(){function n(){}return n.set=function(n,t,e,i,o,s,c){void 0===o&&(o=7),void 0===c&&(c="Lax");var r=encodeURIComponent(n)+"="+JSON.stringify(t)+";";e&&(r+="domain="+e+";"),i&&(r+="path="+i+";"),"number"==typeof o&&(r+="max-age="+60*o*60*24+";"),s&&(r+="secure;"),r+="sameSite="+c+";",document.cookie=r},n.get=function(n){if(""!==document.cookie)for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var i=t[e].split("="),o=i[0],s=i[1];if((o=decodeURIComponent(o).replace(/^ /,""))===n)return JSON.parse(s)}return null},n.getAll=function(){var n={};return""!==document.cookie&&document.cookie.split(";").forEach(function(t){var e=t.split("="),i=e[0],o=e[1];i=decodeURIComponent(i).replace(/^ /,""),o=decodeURIComponent(o),n[i]=o}),n},n.find=function(n){var t=this.getAll();for(var e in"string"==typeof n&&(n=new RegExp("^"+n,"g")),t)if(n.test(e))return t[e];return null},n.delete=function(n,t,e){this.set(n,"",t,e,0)},n.deleteAll=function(n,t){var e=this.getAll();for(var i in e)this.delete(i,n,t)},n.clear=function(n,t,e){var i=this.getAll();for(var o in"string"==typeof n&&(n=new RegExp("^"+n,"g")),i){var s=o.match(n);s&&s.length>0&&this.delete(o,t,e)}},n}(),i={ON_UPDATE:"onUpdate",ON_VALUE_CHANGED:"onValueChange",ON_ACCEPT:"onAccept",ON_REJECT:"onReject"},o=function(){function o(t){var e={name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),linkOnly:!1,onConsent:function(n){var t=n.getChoices();n.saveUserOptions({choices:t,consented:!0})},capabilities:[{name:"functional",checked:!0}]};if(this.options=n({},e,{},t),this.queue=[],this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var i=this.loadUserOptions();i&&i.choices?(this.setChoices(i.choices),this.initStartUpEvents()):this.initFields(),i&&i.consented?this.showNotice():this.showBanner()}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")}var s=o.prototype;return s.initFields=function(){var n=this.options.capabilities.map(function(n){return{name:n.name,value:n.checked}});return this.setChoices(n),n},s.initEvents=function(){var n=this;this.button.reject.addEventListener("click",function(){n.initFields().forEach(function(t){var e=n.getCapability(t.name);n._runValueEventsFor(e,t),n._runEventFor(e,i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onRejectEnd instanceof Function&&n.options.onRejectEnd(n),n.hideBanner(),n.showNotice()}),this.button.accept.addEventListener("click",function(){n.getChoices().forEach(function(t){var e=n.getCapability(t.name);n._runValueEventsFor(e,t),n._runEventFor(e,t.value?i.ON_ACCEPT:i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onAcceptEnd instanceof Function&&n.options.onAcceptEnd(n),n.hideBanner(),n.showNotice()}),this.options.notice.addEventListener("click",function(){n.hideNotice(),n.showBanner()})},s.initStartUpEvents=function(){var n=this;this.getChoices().forEach(function(t){var e=n.getCapability(t.name);n._runEventFor(e,t.value?i.ON_ACCEPT:i.ON_REJECT)}),this._startRunner()},s.loadUserOptions=function(){return e.get(this.options.name)||{}},s.saveUserOptions=function(t){var i=n({},this.loadUserOptions(),{},t);e.set(this.options.name,i)},s.removeUserOptions=function(){e.get(this.options.name)&&e.delete(this.options.name)},s.getChoice=function(n){return this.options.banner.querySelector('.choice [name="choice:'+n+'"]').checked},s.getChoices=function(){var n=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(t){var e=t.getAttribute("name").replace("choice:","");n.push({name:e,value:t.checked})}),n},s.setChoices=function(n){this.options.banner.querySelectorAll(".choice input").forEach(function(t){var e=t.getAttribute("name").replace("choice:",""),i=n.find(function(n){return n.name===e});i?t.checked=i.value:(console.log(t),console.log(i),console.log("COOKIE and CHOICES are not compatible"))})},s.getCapability=function(n){return this.options.capabilities.find(function(t){return t.name===n})},s.showElement=function(n){"animate"in n&&!t()?n.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function(){n.classList.add("visible")}):n.classList.add("visible")},s.hideElement=function(n){"animate"in n&&!t()?n.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function(){n.classList.remove("visible")}):n.classList.remove("visible")},s.hideBanner=function(){this.hideElement(this.options.banner)},s.showBanner=function(){this.showElement(this.options.banner)},s.hideNotice=function(){this.options.linkOnly||this.hideElement(this.options.notice)},s.showNotice=function(){this.options.linkOnly||this.showElement(this.options.notice)},s._addToQueue=function(n,t){this.queue.push({name:n,func:t})},s._startRunner=function(){for(var n=this,t=function(){var t=o[e];n.queue.filter(function(n){return n.name===t}).forEach(function(n){return(0,n.func)()})},e=0,o=Object.values(i);e<o.length;e++)t();this.queue=[]},s._runEventFor=function(n,t,e){var i=this;void 0===e&&(e={}),n[t]&&n[t]instanceof Function&&this._addToQueue(t,function(){return n[t](i,e)})},s._runValueEventsFor=function(n,t){var e={choice:t.value};this._runEventFor(n,i.ON_UPDATE,e);var o=this.loadUserOptions();if(null==o?void 0:o.choices){var s=o.choices.find(function(n){return n.name===t.name});t.value!==s.value&&this._runEventFor(n,i.ON_VALUE_CHANGED,e)}},o}();o.cookie=e,module.exports=o;
//# sourceMappingURL=cookie-consent.js.map
