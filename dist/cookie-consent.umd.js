!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).CookieConsent=n()}(this,function(){function e(){return(e=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}function n(){return window.matchMedia("(prefers-reduced-motion)").matches}var t={expires:a(),path:"/"};function i(e){return Object.keys(e).map(function(n){return n+"="+e[n]}).join("; ")}function o(e){var n=("; "+document.cookie).split("; "+e+"=").pop().split(";").shift();if(n&&"undefined"!==n)return["true","false"].includes(n)?"true"===n:JSON.parse(n)}function s(){return document.cookie.split("; ").map(function(e){var n=e.split("=");return{key:n[0],value:n[1]}})}function c(n,o,s){var c={};c[n]=JSON.stringify(o),c=i(c=e({},c,{},t,{},s)),document.cookie=c}function r(n,o){var s={};s[n]="",s["max-age"]=0,s.path=t.path,(s=e({},s,{},o)).expires=new Date("1996-06-13"),c(n,s=i(s))}function a(e){void 0===e&&(e=365);var n=new Date;return n.setTime(n.getTime()+24*e*60*60*1e3),n}var u={__proto__:null,getCookie:o,getAllCookies:s,setCookie:c,removeCookie:r,clearCookies:function(e,n){var t=s(),i=new RegExp("^"+e,"g");t.forEach(function(e){var t=e.key;t.match(i)&&r(t,n)})},findCookie:function(e){var n=s(),t=new RegExp("^"+e,"g");return n.find(function(e){return t.test(e.key)})||null},getExpirationDate:a},h={ON_UPDATE:"onUpdate",ON_VALUE_CHANGED:"onValueChange",ON_ACCEPT:"onAccept",ON_REJECT:"onReject"},f=function(){function t(n){var t={debug:!1,name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),linkOnly:!1,onRejectEnd:function(){window.location.reload()},onAcceptEnd:function(e){var n=e.getChoices();e.saveUserOptions({choices:n})},capabilities:[{name:"functional",checked:!0,onReject:function(e){e.removeUserOptions()},onAccept:function(e){e.saveUserOptions({consented:!0})}}]};if(this.options=e({},t,{},n),this.queue=[],this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var i=this.loadUserOptions();i&&i.choices?(this.setChoices(i.choices),this.initStartUpEvents()):this.initFields(),i&&i.consented?this.showNotice():this.showBanner()}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")}var i=t.prototype;return i.initFields=function(){var e=this.options.capabilities.map(function(e){return{name:e.name,value:e.checked}});return this.setChoices(e),e},i.initEvents=function(){var e=this;this.button.reject.addEventListener("click",function(){e.options.debug&&console.time("reject");var n=e.initFields();n.forEach(function(n){var t=e.getCapability(n.name);e._runValueEventsFor(t,n),e._runEventFor(t,h.ON_REJECT)}),e._startRunner(),e.setChoices(n),e.saveUserOptions({choices:n}),e.options.onRejectEnd instanceof Function&&e.options.onRejectEnd(e),e.options.debug&&console.timeEnd("reject"),e.hideBanner(),setTimeout(function(){e.showNotice()},160)}),this.button.accept.addEventListener("click",function(){e.options.debug&&console.time("accept"),e.getChoices().forEach(function(n){var t=e.getCapability(n.name);e._runValueEventsFor(t,n),e._runEventFor(t,n.value?h.ON_ACCEPT:h.ON_REJECT)}),e._startRunner(),e.options.onAcceptEnd instanceof Function&&e.options.onAcceptEnd(e),e.options.debug&&console.timeEnd("accept"),e.hideBanner(),setTimeout(function(){e.showNotice()},160)}),this.options.notice.addEventListener("click",function(){e.hideNotice(),e.showBanner()})},i.initStartUpEvents=function(){var e=this;this.getChoices().forEach(function(n){var t=e.getCapability(n.name);e._runEventFor(t,n.value?h.ON_ACCEPT:h.ON_REJECT),e._startRunner()})},i.loadUserOptions=function(){return o(this.options.name)||null},i.saveUserOptions=function(n){var t=e({},o(this.options.name),{},n);c(this.options.name,t)},i.removeUserOptions=function(){o(this.options.name)&&r(this.options.name)},i.getChoice=function(e){return this.options.banner.querySelector('.choice [name="choice:'+e+'"]').checked},i.getChoices=function(){var e=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(n){var t=n.getAttribute("name").replace("choice:","");e.push({name:t,value:n.checked})}),e},i.setChoices=function(e){this.options.banner.querySelectorAll(".choice input").forEach(function(n){var t=n.getAttribute("name").replace("choice:",""),i=e.find(function(e){return e.name===t});i&&(n.checked=i.value)})},i.getCapability=function(e){return this.options.capabilities.find(function(n){return n.name===e})},i.showElement=function(e){"animate"in e&&!n()?e.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function(){e.classList.add("visible")}):e.classList.add("visible")},i.hideElement=function(e){"animate"in e&&!n()?e.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function(){e.classList.remove("visible")}):e.classList.remove("visible")},i.hideBanner=function(){this.hideElement(this.options.banner)},i.showBanner=function(){this.showElement(this.options.banner)},i.hideNotice=function(){this.options.linkOnly||this.hideElement(this.options.notice)},i.showNotice=function(){this.options.linkOnly||this.showElement(this.options.notice)},i._addToQueue=function(e,n){this.queue.push({name:e,func:n})},i._startRunner=function(){var e=this;Object.values(h).forEach(function(n){e.queue.filter(function(e){return e.name===n}).forEach(function(e){return(0,e.func)()})}),this.queue=[]},i._runEventFor=function(e,n,t){var i=this;void 0===t&&(t={}),e&&n&&e[n]&&e[n]instanceof Function?(this._addToQueue(n,function(){return e[n](i,t)}),this.options.debug&&console.info("[CookieConsent]: Added "+e.name+"."+n+" to queue")):this.options.debug&&console.warn("[CookieConsent]: Capability "+e.name+" has no event of name "+n)},i._runValueEventsFor=function(e,n){var t={choice:n.value};this._runEventFor(e,h.ON_UPDATE,t);var i=this.loadUserOptions();if(null==i?void 0:i.choices){var o=i.choices.find(function(e){return e.name===n.name});n.value!==o.value&&this._runEventFor(e,h.ON_VALUE_CHANGED,t)}},t}();return f.cookieService=u,f});
//# sourceMappingURL=cookie-consent.umd.js.map
