!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).CookieConsent=e()}(this,function(){function n(){return(n=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n}).apply(this,arguments)}function e(){return window.matchMedia("(prefers-reduced-motion)").matches}function t(){return"undefined"!=typeof window}var o=function(){function n(){}return n.set=function(n,e,o,i,s,c,r){void 0===s&&(s=7),void 0===r&&(r="Lax");var a=encodeURIComponent(n)+"="+JSON.stringify(e)+";";o&&(a+="domain="+o+";"),i&&(a+="path="+i+";"),"number"==typeof s&&(a+="max-age="+60*s*60*24+";"),c&&(a+="secure;"),a+="sameSite="+r+";",t()&&(document.cookie=a)},n.get=function(n){if(t()&&""!==document.cookie)for(var e=document.cookie.split(";"),o=0;o<e.length;o++){var i=e[o].split("="),s=i[0],c=i[1];if((s=decodeURIComponent(s).replace(/^ /,""))===n)return JSON.parse(c)}return null},n.getAll=function(){var n={};return t()&&""!==document.cookie&&document.cookie.split(";").forEach(function(e){var t=e.split("="),o=t[0],i=t[1];o=decodeURIComponent(o).replace(/^ /,""),i=decodeURIComponent(i),n[o]=i}),n},n.find=function(n){var e=this.getAll();for(var t in"string"==typeof n&&(n=new RegExp("^"+n,"g")),e)if(n.test(t))return e[t];return null},n.delete=function(n,e,t){this.set(n,"",e,t,0)},n.deleteAll=function(n,e){var t=this.getAll();for(var o in t)this.delete(o,n,e)},n.clear=function(n,e,t){var o=this.getAll();for(var i in"string"==typeof n&&(n=new RegExp("^"+n,"g")),o){var s=i.match(n);s&&s.length>0&&this.delete(i,e,t)}},n}(),i={ON_UPDATE:"onUpdate",ON_VALUE_CHANGED:"onValueChange",ON_ACCEPT:"onAccept",ON_REJECT:"onReject"},s=function(){function t(e){var t={name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),linkOnly:!1,onConsent:function(n){var e=n.getChoices();n.saveUserOptions({choices:e,consented:!0})},capabilities:[{name:"functional",noOptOut:!0}]};if(this.options=n({},t,{},e),this.queue=[],this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var o=this.loadUserOptions();console.log(JSON.stringify(o,null,2)),(null==o?void 0:o.choices)&&(this.setChoices(o.choices),this.initStartUpEvents()),(null==o?void 0:o.consented)?this.showNotice():this.showBanner()}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")}var s=t.prototype;return s.initEvents=function(){var n=this;this.button.reject.addEventListener("click",function(){n.disableChoices(),n.getChoices().forEach(function(e){var t=n.getCapability(e.name);n._runValueEventsFor(t,e),n._runEventFor(t,i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onRejectEnd instanceof Function&&n.options.onRejectEnd(n),n.hideBanner(),n.showNotice()}),this.button.accept.addEventListener("click",function(){n.getChoices().forEach(function(e){var t=n.getCapability(e.name);n._runValueEventsFor(t,e),n._runEventFor(t,e.value?i.ON_ACCEPT:i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onAcceptEnd instanceof Function&&n.options.onAcceptEnd(n),n.hideBanner(),n.showNotice()}),this.options.notice.addEventListener("click",function(){n.hideNotice(),n.showBanner()})},s.initStartUpEvents=function(){var n=this;this.getChoices().forEach(function(e){var t=n.getCapability(e.name);n._runEventFor(t,e.value?i.ON_ACCEPT:i.ON_REJECT)}),this._startRunner()},s.loadUserOptions=function(){return o.get(this.options.name)||{}},s.saveUserOptions=function(e){var t=n({},this.loadUserOptions(),{},e);o.set(this.options.name,t,null,"/")},s.removeUserOptions=function(){o.get(this.options.name)&&o.delete(this.options.name)},s.getChoice=function(n){return this.options.banner.querySelector('.choice [name="choice:'+n+'"]').checked},s.getChoices=function(){var n=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(e){var t=e.getAttribute("name").replace("choice:","");n.push({name:t,value:e.checked})}),n},s.setChoices=function(n){this.options.banner.querySelectorAll(".choice input").forEach(function(e){var t=e.getAttribute("name").replace("choice:",""),o=n.find(function(n){return n.name===t});o?e.checked=o.value:(console.log(e),console.log(o),console.log("COOKIE and CHOICES are not compatible"))})},s.disableChoices=function(){var n=this.getChoices();this.options.capabilities.forEach(function(e){var t=e.name,o=e.noOptOut,i=n.findIndex(function(n){return n.name===t});-1===i||o||(n[i].value=!1)}),this.setChoices(n)},s.getCapability=function(n){return this.options.capabilities.find(function(e){return e.name===n})},s.showElement=function(n){"animate"in n&&!e()?n.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function(){n.classList.add("visible")}):n.classList.add("visible")},s.hideElement=function(n){"animate"in n&&!e()?n.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function(){n.classList.remove("visible")}):n.classList.remove("visible")},s.hideBanner=function(){this.hideElement(this.options.banner)},s.showBanner=function(){this.showElement(this.options.banner)},s.hideNotice=function(){this.options.linkOnly||this.hideElement(this.options.notice)},s.showNotice=function(){this.options.linkOnly||this.showElement(this.options.notice)},s._addToQueue=function(n,e){this.queue.push({name:n,func:e})},s._startRunner=function(){for(var n=this,e=function(){var e=o[t];n.queue.filter(function(n){return n.name===e}).forEach(function(n){return(0,n.func)()})},t=0,o=Object.values(i);t<o.length;t++)e();this.queue=[]},s._runEventFor=function(n,e,t){var o=this;void 0===t&&(t={}),n[e]&&n[e]instanceof Function&&this._addToQueue(e,function(){return n[e](o,t)})},s._runValueEventsFor=function(n,e){var t={choice:e.value};this._runEventFor(n,i.ON_UPDATE,t);var o=this.loadUserOptions();if(null==o?void 0:o.choices){var s=o.choices.find(function(n){return n.name===e.name});e.value!==s.value&&this._runEventFor(n,i.ON_VALUE_CHANGED,t)}},t}();return s.cookie=o,s});
//# sourceMappingURL=cookie-consent.umd.js.map
