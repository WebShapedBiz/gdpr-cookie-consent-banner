!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).CookieConsent=e()}(this,function(){function n(){return(n=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function e(){return window.matchMedia("(prefers-reduced-motion)").matches}var t=function(){function n(){}return n.set=function(n,e,t,i,o,s,c){void 0===o&&(o=7),void 0===c&&(c="Lax");var r=encodeURIComponent(n)+"="+JSON.stringify(e)+";";t&&(r+="domain="+t+";"),i&&(r+="path="+i+";"),"number"==typeof o&&(r+="max-age="+60*o*60*24+";"),s&&(r+="secure;"),r+="sameSite="+c+";",document.cookie=r},n.get=function(n){if(""!==document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var i=e[t].split("="),o=i[0],s=i[1];if((o=decodeURIComponent(o).replace(/^ /,""))===n)return JSON.parse(s)}return null},n.getAll=function(){var n={};return""!==document.cookie&&document.cookie.split(";").forEach(function(e){var t=e.split("="),i=t[0],o=t[1];i=decodeURIComponent(i).replace(/^ /,""),o=decodeURIComponent(o),n[i]=o}),n},n.find=function(n){var e=this.getAll();for(var t in"string"==typeof n&&(n=new RegExp("^"+n,"g")),e)if(n.test(t))return e[t];return null},n.delete=function(n,e,t){this.set(n,"",e,t,0)},n.deleteAll=function(n,e){var t=this.getAll();for(var i in t)this.delete(i,n,e)},n.clear=function(n,e,t){var i=this.getAll();for(var o in"string"==typeof n&&(n=new RegExp("^"+n,"g")),i){var s=o.match(n);s&&s.length>0&&this.delete(o,e,t)}},n}(),i={ON_UPDATE:"onUpdate",ON_VALUE_CHANGED:"onValueChange",ON_ACCEPT:"onAccept",ON_REJECT:"onReject"},o=function(){function o(e){var t={name:"cookie-consent",banner:document.getElementById("cookiebanner"),notice:document.getElementById("cookienotice"),linkOnly:!1,onConsent:function(n){var e=n.getChoices();n.saveUserOptions({choices:e,consented:!0})},capabilities:[{name:"functional",checked:!0}]};if(this.options=n({},t,{},e),this.queue=[],this.options.banner&&this.options.notice)if(this.button={},this.button.reject=this.options.banner.querySelector(".reject"),this.button.accept=this.options.banner.querySelector(".accept"),this.button.reject&&this.button.accept){this.initEvents();var i=this.loadUserOptions();i&&i.choices?(this.setChoices(i.choices),this.initStartUpEvents()):this.initFields(),i&&i.consented?this.showNotice():this.showBanner()}else console.error("Can not find required buttons!");else console.error("Can not find required elements!")}var s=o.prototype;return s.initFields=function(){var n=this.options.capabilities.map(function(n){return{name:n.name,value:n.checked}});return this.setChoices(n),n},s.initEvents=function(){var n=this;this.button.reject.addEventListener("click",function(){n.initFields().forEach(function(e){var t=n.getCapability(e.name);n._runValueEventsFor(t,e),n._runEventFor(t,i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onRejectEnd instanceof Function&&n.options.onRejectEnd(n),n.hideBanner(),n.showNotice()}),this.button.accept.addEventListener("click",function(){n.getChoices().forEach(function(e){var t=n.getCapability(e.name);n._runValueEventsFor(t,e),n._runEventFor(t,e.value?i.ON_ACCEPT:i.ON_REJECT)}),n._startRunner(),n.options.onConsent instanceof Function&&n.options.onConsent(n),n.options.onAcceptEnd instanceof Function&&n.options.onAcceptEnd(n),n.hideBanner(),n.showNotice()}),this.options.notice.addEventListener("click",function(){n.hideNotice(),n.showBanner()})},s.initStartUpEvents=function(){var n=this;this.getChoices().forEach(function(e){var t=n.getCapability(e.name);n._runEventFor(t,e.value?i.ON_ACCEPT:i.ON_REJECT)}),this._startRunner()},s.loadUserOptions=function(){return t.get(this.options.name)||{}},s.saveUserOptions=function(e){var i=n({},this.loadUserOptions(),{},e);t.set(this.options.name,i)},s.removeUserOptions=function(){t.get(this.options.name)&&t.delete(this.options.name)},s.getChoice=function(n){return this.options.banner.querySelector('.choice [name="choice:'+n+'"]').checked},s.getChoices=function(){var n=[];return this.options.banner.querySelectorAll(".choice input").forEach(function(e){var t=e.getAttribute("name").replace("choice:","");n.push({name:t,value:e.checked})}),n},s.setChoices=function(n){this.options.banner.querySelectorAll(".choice input").forEach(function(e){var t=e.getAttribute("name").replace("choice:",""),i=n.find(function(n){return n.name===t});i?e.checked=i.value:(console.log(e),console.log(i),console.log("COOKIE and CHOICES are not compatible"))})},s.getCapability=function(n){return this.options.capabilities.find(function(e){return e.name===n})},s.showElement=function(n){"animate"in n&&!e()?n.animate([{opacity:0},{opacity:1}],{duration:320,iterations:1}).addEventListener("finish",function(){n.classList.add("visible")}):n.classList.add("visible")},s.hideElement=function(n){"animate"in n&&!e()?n.animate([{opacity:1},{opacity:0}],{duration:160,iterations:1}).addEventListener("finish",function(){n.classList.remove("visible")}):n.classList.remove("visible")},s.hideBanner=function(){this.hideElement(this.options.banner)},s.showBanner=function(){this.showElement(this.options.banner)},s.hideNotice=function(){this.options.linkOnly||this.hideElement(this.options.notice)},s.showNotice=function(){this.options.linkOnly||this.showElement(this.options.notice)},s._addToQueue=function(n,e){this.queue.push({name:n,func:e})},s._startRunner=function(){for(var n=this,e=function(){var e=o[t];n.queue.filter(function(n){return n.name===e}).forEach(function(n){return(0,n.func)()})},t=0,o=Object.values(i);t<o.length;t++)e();this.queue=[]},s._runEventFor=function(n,e,t){var i=this;void 0===t&&(t={}),n[e]&&n[e]instanceof Function&&this._addToQueue(e,function(){return n[e](i,t)})},s._runValueEventsFor=function(n,e){var t={choice:e.value};this._runEventFor(n,i.ON_UPDATE,t);var o=this.loadUserOptions();if(null==o?void 0:o.choices){var s=o.choices.find(function(n){return n.name===e.name});e.value!==s.value&&this._runEventFor(n,i.ON_VALUE_CHANGED,t)}},o}();return o.cookie=t,o});
//# sourceMappingURL=cookie-consent.umd.js.map
